<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω—Ç–∞–∫—Ç—ã - –•–æ–≤—Ä–∏–Ω—Å–∫–∞—è –ì–∏–º–Ω–∞–∑–∏—è "–õ–∞–º–ø–∞–¥–∞"</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ -->
    <header class="school-header">
        <div class="header-container">
            <div class="logo-section">
                <div class="school-logo">
                    <!-- –ú–µ—Å—Ç–æ –¥–ª—è –ª–æ–≥–æ—Ç–∏–ø–∞ –≥–∏–º–Ω–∞–∑–∏–∏ -->
                    <div class="logo-placeholder">–õ</div>
                </div>
                <div class="school-titles">
                    <h1 class="school-name">–•–æ–≤—Ä–∏–Ω—Å–∫–∞—è –ì–∏–º–Ω–∞–∑–∏—è "–õ–∞–º–ø–∞–¥–∞"</h1>
                    <p class="school-motto">–ó–Ω–∞–Ω–∏–µ - —Å–≤–µ—Ç, –∞ –Ω–µ–∑–Ω–∞–Ω–∏–µ - —Ç—å–º–∞</p>
                </div>
            </div>

            <div class="auth-section">
                <div class="login-form">
                    <input type="text" placeholder="–õ–æ–≥–∏–Ω" id="loginInput">
                    <input type="password" placeholder="–ü–∞—Ä–æ–ª—å" id="passwordInput">
                    <button onclick="handleLogin()">–í–æ–π—Ç–∏</button>
                    <!-- –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É -->
                    <a href="/register" style="margin-top: 8px; text-align: center; display: block; color: white; font-size: 12px; text-decoration: none;">
                        –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                    </a>
                </div>
                <div class="user-view" id="userView" style="display: none;">
                    <span id="userGreeting"></span>
                    <button onclick="handleLogout()">–í—ã–π—Ç–∏</button>
                </div>
            </div>
        </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="main-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="about.html" class="nav-link">–û –≥–∏–º–Ω–∞–∑–∏–∏</a>
            <a href="teachers.html" class="nav-link">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</a>
            <a href="schedule.html" class="nav-link">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a>
            <a href="news.html" class="nav-link">–ù–æ–≤–æ—Å—Ç–∏</a>
            <a href="students.html" class="nav-link">–£—á–µ–Ω–∏–∫–∞–º</a>
            <a href="parents.html" class="nav-link">–†–æ–¥–∏—Ç–µ–ª—è–º</a>
            <a href="contacts.html" class="nav-link active">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="main-container">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <aside class="sidebar">
            <div class="sidebar-section">
                <h3>–ë—ã—Å—Ç—Ä—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                <div class="quick-contacts">
                    <div class="contact-card">
                        <div class="contact-icon">üìû</div>
                        <div class="contact-info">
                            <strong>–û–±—â–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω</strong>
                            <span>+7 (495) 123-45-67</span>
                        </div>
                    </div>
                    <div class="contact-card">
                        <div class="contact-icon">üìß</div>
                        <div class="contact-info">
                            <strong>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</strong>
                            <span>info@lampada.ru</span>
                        </div>
                    </div>
                    <div class="contact-card">
                        <div class="contact-icon">üïí</div>
                        <div class="contact-info">
                            <strong>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã</strong>
                            <span>–ü–Ω-–ü—Ç: 8:00-20:00</span>
                        </div>
                    </div>
                    <div class="contact-card">
                        <div class="contact-icon">üìç</div>
                        <div class="contact-info">
                            <strong>–ê–¥—Ä–µ—Å</strong>
                            <span>–ú–æ—Å–∫–≤–∞, —É–ª. –§–µ—Å—Ç–∏–≤–∞–ª—å–Ω–∞—è, 123</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-section">
                <h3>–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–ª—É–∂–±—ã</h3>
                <div class="emergency-services">
                    <div class="service-item">
                        <strong>–ü–æ–ª–∏—Ü–∏—è</strong>
                        <span>102</span>
                    </div>
                    <div class="service-item">
                        <strong>–°–∫–æ—Ä–∞—è –ø–æ–º–æ—â—å</strong>
                        <span>103</span>
                    </div>
                    <div class="service-item">
                        <strong>–ü–æ–∂–∞—Ä–Ω–∞—è —Å–ª—É–∂–±–∞</strong>
                        <span>101</span>
                    </div>
                    <div class="service-item">
                        <strong>–ì–æ—Ä—è—á–∞—è –ª–∏–Ω–∏—è –ú–ß–°</strong>
                        <span>+7 (495) 637-22-22</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</h3>
                <div class="social-links">
                    <a href="#" class="social-link vk">
                        <span class="social-icon">üìò</span>
                        <span>–í–ö–æ–Ω—Ç–∞–∫—Ç–µ</span>
                    </a>
                    <a href="#" class="social-link telegram">
                        <span class="social-icon">üì±</span>
                        <span>Telegram</span>
                    </a>
                    <a href="#" class="social-link youtube">
                        <span class="social-icon">üé¨</span>
                        <span>YouTube</span>
                    </a>
                </div>
            </div>
        </aside>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è content area -->
        <main class="content-area">
            <section class="page-header">
                <h1>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h1>
                <p class="page-subtitle">–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ —É–¥–æ–±–Ω—ã–º –¥–ª—è –≤–∞—Å —Å–ø–æ—Å–æ–±–æ–º</p>
            </section>

            <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <section class="contacts-section">
                <h2>üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                <div class="contact-grid">
                    <div class="contact-info-card">
                        <h3>üìç –ê–¥—Ä–µ—Å</h3>
                        <div class="contact-details">
                            <p><strong>–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å:</strong><br>125363, –ú–æ—Å–∫–≤–∞, —É–ª. –§–µ—Å—Ç–∏–≤–∞–ª—å–Ω–∞—è, –¥–æ–º 123</p>
                            <p><strong>–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å:</strong><br>125363, –ú–æ—Å–∫–≤–∞, —É–ª. –§–µ—Å—Ç–∏–≤–∞–ª—å–Ω–∞—è, –¥–æ–º 123</p>
                        </div>
                    </div>

                    <div class="contact-info-card">
                        <h3>üìû –¢–µ–ª–µ—Ñ–æ–Ω—ã</h3>
                        <div class="contact-details">
                            <p><strong>–ü—Ä–∏–µ–º–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞:</strong><br>+7 (495) 123-45-67 (–¥–æ–±. 100)</p>
                            <p><strong>–£—á–µ–±–Ω–∞—è —á–∞—Å—Ç—å:</strong><br>+7 (495) 123-45-67 (–¥–æ–±. 102)</p>
                            <p><strong>–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è:</strong><br>+7 (495) 123-45-67 (–¥–æ–±. 104)</p>
                            <p><strong>–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∫–∞–±–∏–Ω–µ—Ç:</strong><br>+7 (495) 123-45-67 (–¥–æ–±. 103)</p>
                        </div>
                    </div>

                    <div class="contact-info-card">
                        <h3>üìß –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</h3>
                        <div class="contact-details">
                            <p><strong>–û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã:</strong><br>info@lampada-gymnasium.ru</p>
                            <p><strong>–î–∏—Ä–µ–∫—Ç–æ—Ä:</strong><br>director@lampada-gymnasium.ru</p>
                            <p><strong>–£—á–µ–±–Ω–∞—è —á–∞—Å—Ç—å:</strong><br>education@lampada-gymnasium.ru</p>
                            <p><strong>–ü—Ä–∏–µ–º–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è:</strong><br>admission@lampada-gymnasium.ru</p>
                        </div>
                    </div>

                    <div class="contact-info-card">
                        <h3>üïí –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</h3>
                        <div class="contact-details">
                            <p><strong>–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ü—è—Ç–Ω–∏—Ü–∞:</strong><br>8:00 - 20:00</p>
                            <p><strong>–°—É–±–±–æ—Ç–∞:</strong><br>9:00 - 16:00</p>
                            <p><strong>–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ:</strong><br>–í—ã—Ö–æ–¥–Ω–æ–π</p>
                            <p><strong>–ü—Ä–∏–µ–º –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π:</strong><br>9:00 - 18:00</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- –ö–∞—Ä—Ç–∞ -->
            <section class="contacts-section">
                <h2>üó∫Ô∏è –ö–∞–∫ –Ω–∞—Å –Ω–∞–π—Ç–∏</h2>
                <div class="map-container-large">
                    <div class="map-wrapper">
                        <script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A3f98f36f46658db31a5c44c15d5eec204f974d873a9ff17a48b34eb72a974431&amp;width=1530&amp;height=400&amp;lang=ru_RU&amp;scroll=true"></script>
                    </div>
                </div>
                
                <div class="transport-info">
                    <h3>üöç –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</h3>
                    <div class="transport-grid">
                        <div class="transport-item">
                            <h4>üöá –ú–µ—Ç—Ä–æ</h4>
                            <p>–°—Ç–∞–Ω—Ü–∏—è "–†–µ—á–Ω–æ–π –≤–æ–∫–∑–∞–ª" (–ó–∞–º–æ—Å–∫–≤–æ—Ä–µ—Ü–∫–∞—è –ª–∏–Ω–∏—è)<br>–ü–µ—à–∫–æ–º 15 –º–∏–Ω—É—Ç</p>
                        </div>
                        <div class="transport-item">
                            <h4>üöå –ê–≤—Ç–æ–±—É—Å—ã</h4>
                            <p>‚Ññ 188, 233, 284, 745<br>–û—Å—Ç–∞–Ω–æ–≤–∫–∞ "–£–ª–∏—Ü–∞ –§–µ—Å—Ç–∏–≤–∞–ª—å–Ω–∞—è"</p>
                        </div>
                        <div class="transport-item">
                            <h4>üöé –¢—Ä–æ–ª–ª–µ–π–±—É—Å—ã</h4>
                            <p>‚Ññ 58, 59<br>–û—Å—Ç–∞–Ω–æ–≤–∫–∞ "–ì–∏–º–Ω–∞–∑–∏—è –õ–∞–º–ø–∞–¥–∞"</p>
                        </div>
                        <div class="transport-item">
                            <h4>üöó –ê–≤—Ç–æ–º–æ–±–∏–ª—å</h4>
                            <p>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞ –Ω–∞ 50 –º–µ—Å—Ç<br>–°–æ —Å—Ç–æ—Ä–æ–Ω—ã —É–ª. –õ–∞–≤–æ—á–∫–∏–Ω–∞</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ -->
            <section class="contacts-section">
                <h2>‚úâÔ∏è –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h2>
                <div class="feedback-form">
                    <form id="contactForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name">–í–∞—à–µ –∏–º—è *</label>
                                <input type="text" id="name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="email">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ *</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                        
                        <div class="form-group">
                            <label for="subject">–¢–µ–º–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è *</label>
                            <select id="subject" name="subject" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É</option>
                                <option value="admission">–ü—Ä–∏–µ–º –≤ –≥–∏–º–Ω–∞–∑–∏—é</option>
                                <option value="education">–£—á–µ–±–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å</option>
                                <option value="schedule">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</option>
                                <option value="payment">–û–ø–ª–∞—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã</option>
                                <option value="other">–î—Ä—É–≥–æ–µ</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="message">–°–æ–æ–±—â–µ–Ω–∏–µ *</label>
                            <textarea id="message" name="message" rows="6" required placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –ø–æ–¥—Ä–æ–±–Ω–æ..."></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
                            <p class="form-note">* –ü–æ–ª—è, –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ –∑–≤–µ–∑–¥–æ—á–∫–æ–π, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è</p>
                        </div>
                    </form>
                </div>
            </section>

            <!-- –û—Ç–¥–µ–ª—ã –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ -->
            <section class="contacts-section">
                <h2>üë• –ö–ª—é—á–µ–≤—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h2>
                <div class="staff-grid">
                    <div class="staff-card">
                        <div class="staff-photo">
                            <div class="photo-placeholder">–ò–û</div>
                        </div>
                        <div class="staff-info">
                            <h4>–ò–≤–∞–Ω–æ–≤–∞ –û–ª—å–≥–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞</h4>
                            <p class="staff-position">–î–∏—Ä–µ–∫—Ç–æ—Ä –≥–∏–º–Ω–∞–∑–∏–∏</p>
                            <p class="staff-contacts">
                                <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> +7 (495) 123-45-67 (–¥–æ–±. 100)<br>
                                <strong>Email:</strong> director@lampada.ru<br>
                                <strong>–ü—Ä–∏–µ–º:</strong> –í—Ç, –ß—Ç 14:00-17:00
                            </p>
                        </div>
                    </div>

                    <div class="staff-card">
                        <div class="staff-photo">
                            <div class="photo-placeholder">–ü–°</div>
                        </div>
                        <div class="staff-info">
                            <h4>–ü–µ—Ç—Ä–æ–≤ –°–µ—Ä–≥–µ–π –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á</h4>
                            <p class="staff-position">–ó–∞–≤—É—á –ø–æ —É—á–µ–±–Ω–æ–π —Ä–∞–±–æ—Ç–µ</p>
                            <p class="staff-contacts">
                                <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> +7 (495) 123-45-67 (–¥–æ–±. 102)<br>
                                <strong>Email:</strong> zavuch@lampada.ru<br>
                                <strong>–ü—Ä–∏–µ–º:</strong> –ü–Ω-–ü—Ç 10:00-13:00
                            </p>
                        </div>
                    </div>

                    <div class="staff-card">
                        <div class="staff-photo">
                            <div class="photo-placeholder">–ê–ú</div>
                        </div>
                        <div class="staff-info">
                            <h4>–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∞ –ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–Ω–∞</h4>
                            <p class="staff-position">–ó–∞–≤—É—á –ø–æ –≤–æ—Å–ø–∏—Ç–∞—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ</p>
                            <p class="staff-contacts">
                                <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> +7 (495) 123-45-67 (–¥–æ–±. 106)<br>
                                <strong>Email:</strong> vospitanie@lampada.ru<br>
                                <strong>–ü—Ä–∏–µ–º:</strong> –ü–Ω, –°—Ä 15:00-18:00
                            </p>
                        </div>
                    </div>

                    <div class="staff-card">
                        <div class="staff-photo">
                            <div class="photo-placeholder">–°–ö</div>
                        </div>
                        <div class="staff-info">
                            <h4>–°–∏–¥–æ—Ä–æ–≤–∞ –ö—Å–µ–Ω–∏—è –ê–Ω–¥—Ä–µ–µ–≤–Ω–∞</h4>
                            <p class="staff-position">–°–µ–∫—Ä–µ—Ç–∞—Ä—å —É—á–µ–±–Ω–æ–π —á–∞—Å—Ç–∏</p>
                            <p class="staff-contacts">
                                <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> +7 (495) 123-45-67 (–¥–æ–±. 101)<br>
                                <strong>Email:</strong> secretary@lampada.ru<br>
                                <strong>–ü—Ä–∏–µ–º:</strong> –ü–Ω-–ü—Ç 9:00-18:00
                            </p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- –ü–æ–¥–≤–∞–ª -->
    <footer class="school-footer">
        <div class="footer-container">
            <div class="footer-info">
                <p>&copy; 2023 –•–æ–≤—Ä–∏–Ω—Å–∫–∞—è –ì–∏–º–Ω–∞–∑–∏—è "–õ–∞–º–ø–∞–¥–∞". –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                <p>–¢–µ–ª–µ—Ñ–æ–Ω: +7 (495) 123-45-67 | Email: info@lampada-gymnasium.ru</p>
            </div>
        </div>
    </footer>

    <script>
        function handleLogin() {
            document.getElementById('userView').style.display = 'block';
            document.querySelector('.login-form').style.display = 'none';
            document.getElementById('userGreeting').textContent = '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!';
        }

        function handleLogout() {
            document.getElementById('userView').style.display = 'none';
            document.querySelector('.login-form').style.display = 'flex';
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
            const formData = new FormData(this);
            const name = formData.get('name');
            const email = formData.get('email');
            
            // –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            alert(`–°–ø–∞—Å–∏–±–æ, ${name}! –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –ø–æ email: ${email}`);
            this.reset();
        });

        // –ú–∞—Å–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        document.getElementById('phone').addEventListener('input', function(e) {
            let x = e.target.value.replace(/\D/g, '').match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);
            e.target.value = '+7' + (x[2] ? ' (' + x[2] : '') + (x[3] ? ') ' + x[3] : '') + (x[4] ? '-' + x[4] : '') + (x[5] ? '-' + x[5] : '');
        });
    </script>
<script>
// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
let currentUser = null;
let authToken = localStorage.getItem('authToken');

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
async function checkAuth() {
    if (!authToken) {
        return false;
    }

    try {
        const response = await fetch('/api/users/me', {
            headers: {
                'Authorization': `Bearer ${authToken}`
            }
        });

        if (response.ok) {
            const userData = await response.json();
            currentUser = userData;
            updateAuthUI();
            return true;
        } else {
            localStorage.removeItem('authToken');
            authToken = null;
            return false;
        }
    } catch (error) {
        console.error('Auth check failed:', error);
        return false;
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
function updateAuthUI() {
    const loginForm = document.querySelector('.login-form');
    const userView = document.getElementById('userView');
    const userGreeting = document.getElementById('userGreeting');

    if (currentUser) {
        loginForm.style.display = 'none';
        userView.style.display = 'block';
        userGreeting.textContent = `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${currentUser.full_name}!`;
    } else {
        loginForm.style.display = 'flex';
        userView.style.display = 'none';
    }
}

// –§—É–Ω–∫—Ü–∏—è –≤—Ö–æ–¥–∞
async function handleLogin() {
    const loginInput = document.getElementById('loginInput');
    const passwordInput = document.getElementById('passwordInput');

    try {
        const response = await fetch('/api/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                username: loginInput.value,
                password: passwordInput.value
            })
        });

        if (response.ok) {
            const data = await response.json();
            authToken = data.access_token;
            currentUser = data.user;

            localStorage.setItem('authToken', authToken);
            updateAuthUI();

            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
            loginInput.value = '';
            passwordInput.value = '';
        } else {
            const errorData = await response.json();
            alert(`–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ${errorData.detail}`);
        }
    } catch (error) {
        console.error('Login error:', error);
        alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
    }
}

// –§—É–Ω–∫—Ü–∏—è –≤—ã—Ö–æ–¥–∞
function handleLogout() {
    localStorage.removeItem('authToken');
    authToken = null;
    currentUser = null;
    updateAuthUI();
}

// –§—É–Ω–∫—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
async function handleRegister() {
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    const username = prompt('–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:');
    const email = prompt('–í–≤–µ–¥–∏—Ç–µ email:');
    const password = prompt('–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:');
    const fullName = prompt('–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω–æ–µ –∏–º—è:');

    if (username && email && password && fullName) {
        try {
            const response = await fetch('/api/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    username: username,
                    email: email,
                    password: password,
                    full_name: fullName,
                    role: 'student'
                })
            });

            if (response.ok) {
                alert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏.');
            } else {
                const errorData = await response.json();
                alert(`–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ${errorData.detail}`);
            }
        } catch (error) {
            console.error('Registration error:', error);
            alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
        }
    }
}

// –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ HTML
document.addEventListener('DOMContentLoaded', function() {
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ —Ñ–æ—Ä–º—É –ª–æ–≥–∏–Ω–∞
    const loginForm = document.querySelector('.login-form');
    const registerButton = document.createElement('button');
    registerButton.type = 'button';
    registerButton.textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è';
    registerButton.style.marginTop = '5px';
    registerButton.style.padding = '3px 8px';
    registerButton.style.fontSize = '12px';
    registerButton.style.background = 'transparent';
    registerButton.style.border = '1px solid #fff';
    registerButton.style.color = '#fff';
    registerButton.style.cursor = 'pointer';
    registerButton.onclick = handleRegister;

    loginForm.appendChild(registerButton);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    checkAuth();
});
</script>
<script src="/static/auth.js"></script>
</body>
</html>